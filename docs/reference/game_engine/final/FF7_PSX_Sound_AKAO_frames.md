---
title: "FF7 PSX Sound AKAO Frames"
module: "Sound"
created: "2025-11-29 00:00 JST"
modified: "2025-12-02 00:22 JST"
session_id: "dcda5a4f-d1e6-4ac8-9e4d-267eda712457"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Documents the AKAO sound frame format used by FF7's PSX sound system, including header structure, channel info, and opcodes for sequenced audio playback. LLMs should read this when analyzing sound playback code, debugging audio issues, or understanding how field scripts trigger music and sound effects."
llm_tags: ["psx", "sound", "akao", "audio-sequencer", "midi-like", "opcodes"]
llm_primary_topics: ["AKAO frame structure", "Sound channel configuration", "Audio opcodes", "Field script sound integration"]
llm_related_docs: ["FF7_PSX_Sound_Overview.md", "FF7_PSX_Sound_INSTRxALL.md", "FF7_PSX_Sound_INSTRxDAT.md", "FF7_Field_Module.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: []
---

<!--
STANDARDIZATION METADATA
Original: FF7_PSX_Sound_AKAO_frames.md
Source: merged_with_pdf_content/FF7_PSX_Sound_AKAO_frames.md
Standardized: 2025-12-02 00:22 JST
Session-ID: dcda5a4f-d1e6-4ac8-9e4d-267eda712457
Agent: FF7 Documentation Standardization Agent v1.0

Previous Merge Metadata:
MERGE METADATA
Created: 2025-11-29
Original: FF7_PSX_Sound_AKAO_frames.md (153 lines)
Major section: 05_FIELD_MODULE.md (opcode references only)
Additions: Field Module opcode cross-reference (15 lines)
Reason: Added architectural context for how AKAO frames are invoked from field scripts
Status: COMPLETE - Original content preserved + cross-reference added

Standardization Changes Applied:
- Added YAML frontmatter with LLM routing metadata
- Added HTML comment metadata block with merge history preservation
- Fixed heading hierarchy: Removed wiki-style anchor suffixes from headings
- Converted H1 title from wiki-style "{#anchor}" format to clean markdown
- Removed wiki-style TOC (redundant with GitHub auto-TOC)
- Added language tags to code blocks (c for struct, text for hex examples)
- Converted 27 wiki-style links to standard markdown format
- Fixed raw HTML in heading (`<channels count>` converted to backticks)
- Standardized section structure for consistency

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document covers the AKAO sequenced audio format used by FF7's PlayStation sound system.
AKAO frames are similar to MIDI sequences - they're a custom tracker format optimized for PSX
hardware. The document details the 16-byte header structure, channel bitmask configuration,
and the opcode command set for controlling playback. Key integration point: Field scripts
trigger AKAO playback via opcodes 0xF0 (MUSIC), 0xF2 (AKAO), and 0xDB (AKAO2). Related
documentation includes instrument data formats (INSTRx.ALL, INSTRx.DAT) and the Field Module
opcode matrix.
-->

# FF7 PSX Sound AKAO Frames

## Introduction

AKAO frames are the most complicated frames in FF7's sound system. ("AKAO" is the frame magic identifier, probably developed by Minoru Akao, Square Enix sound programmer.)

The frame format is similar to MIDI sequences - it's a custom tracker format for playing sequenced sound, well-tuned specifically for PSX hardware.

These frames are used in all FF7 game modules: Field, Battle, World Map, and minigames.

### Invocation from Field Scripts

AKAO frames are triggered from field scripts using specific opcodes:

- **0xF0 (MUSIC)**: Plays music using AKAO frames
- **0xF2 (AKAO)**: Executes AKAO sound commands
- **0xDB (AKAO2)**: Alternative AKAO command interface

These opcodes are part of the Field Module's script system (see [Field Module](FF7_Field_Module.md) for complete opcode matrix). When a field script executes one of these opcodes, it triggers the AKAO frame playback system documented in this file.

### AKAO Sound Files

All files with extension `*.SND` are AKAO format:

| File | Description |
|------|-------------|
| `MINI/ASERI2.SND` | Battle Arena theme |
| `MINI/SENSUI.SND` | Submarine minigame |
| `ENEMY6/OVER2.SND` | Game over sequence |
| `ENEMY6/FAN2.SND` | Battle win "fanfare" sequence |
| `MOVIE/OVER2.SND` | Game over sequence (duplicate) |

Other AKAO frames are hard-wired in other files.

## AKAO Frame Structure

### Header (16 bytes)

```c
struct AkaoHeader
{
    static const uint8_t magic[4]; // "AKAO" C-string aka frame *MAGIC*
    uint16_t id;                   // frame ID, used for playing sequence
    uint16_t length;               // frame length - sizeof(header)
    uint8_t unknown[8];            // some numbers, can't find their usage
};
```

### Channel Info (4 bytes + 2 bytes Ã— `channels_count`)

First there is a 32-bit number (offset 0x10), which represents a bitmask of used channels in this frame. After this, there are `channels_count` offsets to channel opcode data, counting from the current offset.

### Channel Commands (AKAO Opcodes)

This is the most complicated part.

For every channel in an AKAO frame there is a set of commands to perform. This is similar to Field opcodes. Here these sound commands are called "opcodes". Every opcode has its own number of arguments (from no-arguments to 3 arguments).

## Example: Home-Created AKAO Frame

### Header

```text
41 4b 41 4f  - AKAO string
34 12        - frame ID: 0x1234
16 00        - frame length 0x16 in hex or 22 in decimal
04 00 96 12 18 22 46 28  - unknown data
```

### Channel Info

```text
01 00 00 00  - this indicates that only one channel is used
00 00        - offset to first channel opcodes: 0x00 means next to this offset is opcodes for first channel
```

### Channel Commands

```text
e8 a8 66  - sets tempo, parameter 0x66a8
ea 00 50  - sets reverb depth
a8 55     - load sample 0x55 from INSTR.ALL to channel
aa 40     - sets channel volume
c2        - turns on reverb effect
a1 0c     - sets volume pan
c8        - sets loop point
66        - 0x66 % 11 = 3 (take 3rd number from play length table)
            0x66 / 11 = 9 (take pitch[9] from loaded instrument record index)
ca        - returns to saved loop point with opcode c8
```

This example plays the Chocobo "Whoo-Hoo" sound (instrument number 0x55) repeatedly.

## Sound Opcode List

### Implemented Opcodes

| Opcode | Name | Description |
|--------|------|-------------|
| 0xA0 | Finish Channel | Terminates channel playback |
| 0xA1 | Load Instrument | Loads instrument sample |
| 0xA3 | Volume Modifier | Modifies channel volume |
| 0xA5 | Pitch Divider | Divides pitch value |
| 0xA8 | Channel Volume | Sets channel volume level |
| 0xAA | Channel Pan | Sets stereo pan position |
| 0xC2 | Turn On Reverb | Enables reverb effect |
| 0xC8 | Loop Point | Sets loop return point |
| 0xCA | Return to Loop | Returns to loop point |
| 0xE8 | Tempo | Sets playback tempo |
| 0xEA | Reverb Depth | Sets reverb depth level |

### Partially Documented Opcodes

| Opcode | Status |
|--------|--------|
| 0xB4 | Unknown function |
| 0xCD | Unimplemented |
| 0xD1 | Unimplemented |
| 0xFD | Unknown function |
| 0xFE | Unknown function |

### Unimplemented Opcodes (Reference to 0xA0)

The following opcodes are unimplemented in the code and reference 0xA0 (Finish Channel):

- 0xE0, 0xE1, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7
- 0xFA, 0xFB, 0xFC, 0xFF

## Related Documentation

- [PSX Sound Overview](FF7_PSX_Sound_Overview.md) - Sound system architecture
- [INSTRx.ALL Format](FF7_PSX_Sound_INSTRxALL.md) - Instrument sample data
- [INSTRx.DAT Format](FF7_PSX_Sound_INSTRxDAT.md) - Instrument metadata
- [Field Module](FF7_Field_Module.md) - Field script opcodes that trigger AKAO
