---
title: "FF7/Kernel"
module: "Kernel"
created: "2025-11-28 14:30 JST"
modified: "2025-12-02 00:02 JST"
session_id: "887a1b3f-e34c-44f4-8434-e7e55610b603"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Documents the KERNEL.BIN archive structure including all 27 data sections for commands, attacks, items, weapons, armor, accessories, materia, and text strings. LLMs should read this when parsing kernel data files, modifying game stats, or understanding FF7's binary data format specifications."
llm_tags: ["kernel", "bin-archive", "data-format", "item-data", "weapon-data", "materia-data", "savemap"]
llm_primary_topics: ["KERNEL.BIN section formats", "Equipment data structures", "Materia attributes", "Item restriction masks", "Character stat initialization"]
llm_related_docs: ["FF7_Kernel_Overview.md", "FF7_Kernel_Memory_management.md", "FF7_Kernel_Kernelbin.md", "FF7_Kernel_Low_level_libraries.md", "FF7_Savemap.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: []
---

<!--
STANDARDIZATION METADATA
Original: FF7_Kernel.md
Source: merged_with_pdf_content/FF7_Kernel.md
Standardized: 2025-12-02 00:02 JST
Session-ID: 887a1b3f-e34c-44f4-8434-e7e55610b603
Agent: FF7 Documentation Standardization Agent v1.0

Previous Merge Metadata:
- Original file: FF7_Kernel.md
- Source extraction: 03_KERNEL.md (lines 216-1856 from original 8,167-line file)
- Extraction date: 2025-11-28 14:30 JST
- Content preserved: YES (original content unchanged, new content appended with markers)

Standardization Changes Applied:
- Added YAML frontmatter with LLM routing metadata
- Added HTML comment metadata block with standardization history
- Converted 4 wiki-style links to standard markdown format
- Verified heading hierarchy: H1→H2→H3→H4 (already correct, no changes needed)
- Removed redundant empty table cells from Section 1 Command Data Format
- Preserved all technical content and table structures exactly
- No images in document (no path standardization needed)
- No code blocks in document (no language tags needed)

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document is the primary reference for FF7's KERNEL.BIN binary archive format,
which stores all static game data including commands, attacks, items, weapons, armor,
accessories, and materia. Each section has detailed byte-level specifications with
offset tables and flag definitions. Cross-reference with FF7_Savemap.md for runtime
data structures and FF7_Kernel_Low_level_libraries.md for compression/archive formats.
-->

# FF7/Kernel

This file contains both the original navigation content and extracted technical documentation from the major section `03_KERNEL.md`.

## Table of Contents

- [Kernel Overview](FF7_Kernel_Overview.md)
- [Memory Management](FF7_Kernel_Memory_management.md)
- [Kernel.bin](FF7_Kernel_Kernelbin.md)
- [Low Level Libraries](FF7_Kernel_Low_level_libraries.md)

---

## Game Resources - Kernel.BIN Detailed Format Specifications

### Important Files

| PSX Version      | PC Version               |
|------------------|--------------------------|
| /INIT/KERNEL.BIN | /DATA/KERNEL/KERNEL.BIN  |
|                  | /DATA/KERNEL/KERNEL2.BIN |

### The KERNEL.BIN Archive

The file /INIT/KERNEL.BIN is in BIN-GZIP format. This format is explained later in this document. It consists of 27 gziped sections concatenated together with a 6 byte header for each. This file is the same both on the PC and PSX versions. This holds all the static data and menu text for the game, with a look up table at the beginning of the section. Sections 10-27 are FF Text files.

The KERNEL.BIN file consists of the following sections.

| File | Data                          | Offset |
|------|-------------------------------|--------|
| 1    | Command data                  | 0x0006 |
| 2    | Attack data                   | 0x0086 |
| 3    | Unknown (Savemap?)            | 0x063A |
| 4    | Character starting stats      | 0x0F7F |
| 5    | Item data                     | 0x111B |
| 6    | Weapon data                   | 0x137A |
| 7    | Armor data                    | 0x1A30 |
| 8    | Accessory data                | 0x1B73 |
| 9    | Materia data                  | 0x1C11 |
| 10   | Command Descriptions          | 0x1F32 |
| 11   | Magic Descriptions            | 0x2119 |
| 12   | Item Descriptions             | 0x28D4 |
| 13   | Weapon Descriptions           | 0x2EE2 |
| 14   | Armor Descriptions            | 0x307B |
| 15   | Accessory Descriptions        | 0x315F |
| 16   | Materia Descriptions          | 0x3384 |
| 17   | Key Item Description          | 0x3838 |
| 18   | Command Names                 | 0x3BE2 |
| 19   | Magic Names                   | 0x3CCA |
| 20   | Item Names                    | 0x4293 |
| 21   | Weapon Names                  | 0x4651 |
| 22   | Armor Names                   | 0x4B02 |
| 23   | Accessory Names               | 0x4C4B |
| 24   | Materia Names                 | 0x4D90 |
| 25   | Key Item Names                | 0x5040 |
| 26   | Battle and Battle-Screen Text | 0x5217 |
| 27   | Summon Attack Names           | 0x5692 |

### KERNEL.BIN Section Formats

The first 9 sections of data (i.e. The non-text related items) have a typical BIN file format. The text sections (10-27) do not have the typical 6 byte header. The text sections have a header of pointers to the text block. The text is in FF text format.

#### Section 1: Command Data Format

This contains the data for Menu commands. Each record is 16 bytes long.

> **Note**: The original documentation contains an empty specification table for this section. The exact byte-level format requires further reverse-engineering documentation.

#### Section 2: Attacks Data Format

This contains the data for the different attacks. Each record is 28 bytes long.

| Offset | Length  | Description      | Value/Notes                  |
|--------|---------|------------------|------------------------------|
| 0x00   | 4 bytes | Unknown          |                              |
| 0x04   | 1 byte  | Casting cost     |                              |
| 0x05   | 5 bytes | Unknown          |                              |
| 0x0A   | 1 byte  | Attack type      |                              |
| 0x0B   | 2 bytes | Attack attribute | See values below             |

**Attack Attribute Values (0x0B):**

| Value  | Description                  |
|--------|------------------------------|
| 0x0000 | Escape/Exit-Type             |
| 0x0001 | Ribbon-Like                  |
| 0x0003 | Enemy Skill(?)               |
| 0x0005 | Enemy Skill(?)               |
| 0x0007 | Enemy Skill(?)               |
| 0x000D | Restorative/Protective       |
| 0x000F | Status-giving/Elemental      |
| 0x0011 | Shield                       |
| 0x0013 | Limit Break                  |
| 0x0015 | Cait Sith Limit Break        |
| 0x0017 | Summon                       |
| 0x00C7 | Roulette                     |
| 0x0097 | Multiple Strike Limit breaks |
| 0xFF01 | Phoenix Down                 |
| 0xFF03 | X-needles attack             |
| 0xFF17 | Final Limit break            |

| Offset | Length  | Description     | Value/Notes        |
|--------|---------|-----------------|---------------------|
| 0x0D   | 1 byte  | ID Number       |                     |
| 0x0E   | 1 byte  | Restore Apply   |                     |
| 0x0F   | 1 byte  | Strength        |                     |
| 0x10   | 1 byte  | Restore type    | See values below    |

**Restore Type Values (0x10):**

| Value | Description      |
|-------|------------------|
| 0x00  | Restore HP       |
| 0x01  | Restore MP       |
| 0x02  | Restore Ailment  |
| 0xFF  | None             |

| Offset | Length  | Description     |
|--------|---------|-----------------|
| 0x11   | 2 bytes | Unknown         |
| 0x13   | 1 byte  | Times attacking |
| 0x14   | 4 bytes | Statuses        |
| 0x18   | 2 bytes | Element         |
| 0x20   | 2 bytes | Unknown         |

#### Section 3: Savemap

This is all the initial values and structure for most of the [[Savemap]], excluding the header data and the tail of the last bank. (0x0054 to 0x0fe7). This is copied into ram on initialization. This format is explained in the [Savemap](FF7_Savemap.md) section.

#### Section 4: Initialization Data

This contains the starting stats for the characters and related game states. On "New Game", this data is copied directly into the save map, (From offset 0x0054 to 0x0BAF) which is explained in the [Savemap](FF7_Savemap.md) section. This data has the same format as the data explained in that section.

#### Section 5: Item Data Format

This contains the item data. Each item record is 27 bytes long.

| Offset | Length  | Description       | Value/Notes                                                      |
|--------|---------|-------------------|------------------------------------------------------------------|
| 0x00   | 8 bytes | Unknown           | Always 0xFFFFFFFF                                                |
| 0x08   | 2 bytes | Unknown           |                                                                  |
| 0x0A   | 1 byte  | Restriction Mask  | See Restriction Mask table below                                 |
| 0x0B   | 2 bytes | Attack Target     | See values below                                                 |

**Attack Target Values (0x0B):**

| Value | Description      |
|-------|------------------|
| 0x01  | One Target       |
| 0x03  | Unknown          |
| 0x05  | Multiple Targets |
| 0x07  | Unknown          |
| 0x10  | On Party Only    |

| Offset | Length  | Description       | Value/Notes                          |
|--------|---------|-------------------|--------------------------------------|
| 0x0D   | 1 byte  | Item ID           |                                      |
| 0x0E   | 1 byte  | Restore Apply     | See values below                     |

**Restore Apply Values (0x0E):**

| Value | Description                            |
|-------|----------------------------------------|
| 0x00  | Unknown                                |
| 0x08  | Apply also to MP                       |
| 0x22  | Unknown                                |
| 0x23  | Unknown                                |
| 0x24  | Damage / Restore by %                  |
| 0x26  | Damage / Restore by 20 X Amount Multiplier |
| 0x37  | Causes Damage                          |
| 0x47  | Unknown                                |
| 0x50  | Affects Stats                          |
| 0xFF  | None                                   |

| Offset | Length  | Description       | Value/Notes              |
|--------|---------|-------------------|--------------------------|
| 0x0F   | 1 byte  | Amount Multiplier |                          |
| 0x10   | 1 byte  | Restore Type      | See Restore Type table   |
| 0x11   | 3 bytes | Unknown           |                          |
| 0x14   | 4 bytes | Status effects    |                          |
| 0x18   | 2 bytes | Element           |                          |
| 0x1A   | 2 bytes | Unknown           |                          |

#### Section 6: Weapon Data Format

This contains the weapon data. Each weapon attribute is 44 bytes long.

| Offset | Length  | Description                    | Value/Notes           |
|--------|---------|--------------------------------|-----------------------|
| 0x00   | 1 byte  | Weapon Range                   | 0x03=Long, 0x23=Normal |
| 0x01   | 1 byte  | Unknown                        | Always 0xFF           |
| 0x02   | 1 byte  | Special Options (Attack Modifiers) | See values below  |

**Special Options Values (0x02):**

| Value | Description |
|-------|-------------|
| 0x11  | Normal |
| 0xA0  | 1 + Number of Status Effects Tifa has out of following: Near-death, Poison, Sadness, Silence, Slow, Darkness + 2 * Number of Status Effects Tifa has out of following: Death sentence, Slow-numb |
| 0xA1  | Power up when near death |
| 0xA2  | 1 + Number of Allies in Death Status |
| 0xA3  | (Target's Level / 16) When used against allies, the weapon will act like a physical hit, but will cause no damage (not even a Miss or a 0). The Weapon has no Morph modifier; it does the same damage with or without Morph. (Conformer) |
| 0xA4  | (1 + [48 * Player's HP / Player's Max HP]) / 16 |
| 0xA5  | (1 + [48 * Player's MP / Player's Max MP]) / 16 |
| 0xA6  | (1 + [Total AP on Weapon / 10000]) / 16 |
| 0xA7  | (10 + [Player's Kills / 128]) / 16 |
| 0xA8  | (1 + [Player's Limit Level * Player's Limit Units / 16]) / 16 |

| Offset | Length  | Description              | Value/Notes   |
|--------|---------|--------------------------|---------------|
| 0x03   | 1 byte  | Unknown                  | Always 0xFF   |
| 0x04   | 1 byte  | Weapon Attack            |               |
| 0x05   | 1 byte  | Unknown                  | Always 0xFF   |
| 0x06   | 1 byte  | Materia growth rate      |               |
| 0x07   | 1 byte  | Unknown                  |               |
| 0x08   | 1 byte  | Weapon attack percentage |               |
| 0x09   | 3 bytes | Weapon Model ID          |               |
| 0x0C   | 2 bytes | Unknown                  | Always 0xFFFF |
| 0x0E   | 2 bytes | Equip Mask               | See Equip Mask table |
| 0x10   | 2 bytes | Attack Type              | See values below |

**Attack Type Values (0x10):**

| Value  | Description |
|--------|-------------|
| 0x0004 | Cut         |
| 0x0008 | Hit         |
| 0x0010 | Punch       |
| 0x0020 | Hit         |

| Offset | Length  | Description              | Value/Notes   |
|--------|---------|--------------------------|---------------|
| 0x12   | 2 bytes | Unknown                  | Always 0xFFFF |
| 0x14   | 4 bytes | Increase Stat Type       | See Stat Type table |
| 0x18   | 4 bytes | Stat Amount Increased    | Based on Increase Stat Type |
| 0x1C   | 8 bytes | Materia Slots            | See Materia Slot table |
| 0x24   | 3 bytes | Unknown                  |               |
| 0x27   | 1 byte  | Attack texture graphic   |               |
| 0x28   | 2 bytes | Unknown                  | Always 0xFFFF |
| 0x2A   | 1 byte  | Restriction Mask         | See Restriction Mask table |
| 0x2B   | 1 byte  | Unknown                  | Always 0xFF   |

#### Section 7: Armor Data Format

This contains the armor data. Each record is 36 bytes long.

| Offset | Length  | Description      | Value/Notes         |
|--------|---------|------------------|---------------------|
| 0x01   | 1 byte  | Unknown          |                     |
| 0x02   | 1 byte  | Damage Type      | See values below    |

**Damage Type Values (0x02):**

| Value | Description |
|-------|-------------|
| 0xFF  | Normal      |
| 0x00  | Absorb      |
| 0x01  | No Damage   |
| 0x02  | Half        |

| Offset | Length  | Description      | Value/Notes         |
|--------|---------|------------------|---------------------|
| 0x03   | 1 byte  | Defense          |                     |
| 0x04   | 1 byte  | Magic Defense    |                     |
| 0x05   | 1 byte  | Defense %        |                     |
| 0x06   | 1 byte  | Magic Defense %  |                     |
| 0x07   | 3 bytes | Unknown          |                     |
| 0x08   | 8 bytes | Materia Slots    | See Materia Slot table |
| 0x12   | 1 byte  | Materia Growth   |                     |
| 0x13   | 1 byte  | Equip Mask       | See Equip Mask table |
| 0x15   | 1 byte  | Element          | See Element table   |
| 0x16   | 1 byte  | Unknown          |                     |
| 0x17   | 2 bytes | Unknown          | Always 0x00FF       |
| 0x19   | 2 bytes | Stat Bonus       | See Stat Type table |
| 0x1B   | 2 bytes | Unknown          | Always 0xFFFF       |
| 0x1D   | 2 bytes | Stat increase    |                     |
| 0x1F   | 2 bytes | Unknown          | Always 0xFFFF       |
| 0x21   | 1 byte  | Restriction Mask | See Restriction Mask table |
| 0x22   | 3 bytes | Unknown          | Always 0xFFFFFF     |

#### Section 8: Accessory Data Format

This contains the accessory data. Each record is 16 bytes long.

| Offset | Length  | Description        | Value/Notes           |
|--------|---------|--------------------|-----------------------|
| 0x00   | 2 bytes | Stat Bonus         | See Stat Type table   |
| 0x02   | 2 bytes | Bonus Amount       |                       |
| 0x04   | 1 byte  | Elemental Strength | See values below      |

**Elemental Strength Values (0x04):**

| Value | Description |
|-------|-------------|
| 0x00  | Drains      |
| 0x01  | Nullifies   |

| Offset | Length  | Description    | Value/Notes      |
|--------|---------|----------------|------------------|
| 0x05   | 1 byte  | Special Effect | See values below |

**Special Effect Values (0x05):**

| Value | Description              |
|-------|--------------------------|
| 0x00  | Haste                    |
| 0x01  | Fury                     |
| 0x02  | Curse Ring Effect        |
| 0x03  | Reflect                  |
| 0x04  | Increase Stealing Rate   |
| 0x05  | Increase Manipulation Rate |
| 0x06  | Barrier / MBarrier       |

| Offset | Length  | Description    | Value/Notes          |
|--------|---------|----------------|----------------------|
| 0x06   | 2 bytes | Elemental Type | See Element table    |
| 0x08   | 4 bytes | Status Protect | See Status table     |
| 0x0C   | 2 bytes | Equip Mask     | See Equip Mask table |
| 0x0E   | 1 byte  | Restriction Mask | See Restriction Mask table |
| 0x0F   | 1 byte  | Unknown        | Always 0xFF          |

#### Section 9: Materia Data Format

This contains the Materia data. Each record is 20 bytes long.

| Offset | Length  | Description        | Value/Notes                    |
|--------|---------|--------------------|--------------------------------|
| 0x00   | 8 bytes | Level-up AP limits | Multiples of 100 (4x WORD)     |
| 0x08   | 1 byte  | Equip Effect       | See Equip Effects table below  |
| 0x09   | 3 bytes | Status Bitmask     |                                |
| 0x0C   | 1 byte  | Element            | See Element table              |
| 0x0D   | 1 byte  | Materia Type       | See values below               |

**Materia Type Values (0x0D):**

| Value | Description |
|-------|-------------|
| 0x00  | Unknown |
| 0x08  | Master Command: All commands are available |
| 0x0A  | Master Magic: All spells are available |
| 0x0C  | Master Summon: All summons are available |
| 0x12  | Command: Command at offset 0x0E to 0x12 is available, depending on AP level |
| 0x16  | Command: Commands at offset 0x0E to 0x12 become available as you level up |
| 0x19  | Magic: Spells 0x0E to 0x11 become available as you level up |
| 0x20  | Booster%: 0x0E is boosted by offset 0x0F to 0x13 depending on AP level |
| 0x21  | Unknown |
| 0x25  | Unknown |
| 0x30  | Unknown |
| 0x33  | W-Command: Command at 0x0E is added to the battle menu |
| 0x35  | Unknown |
| 0x3B  | Summon: Spell at 0x0E can be used from offset 0x0F to 0x13 times depending on AP level |
| 0x57  | Enemy Skill: Enables command 'Enemy Skill' |

| Offset | Length | Description        | Value/Notes |
|--------|--------|--------------------|-------------|
| 0x0E   | 1 byte | Materia attributes | See Above   |
| 0x0F   | 1 byte | Materia attributes | See Above   |
| 0x10   | 1 byte | Materia attributes | See Above   |
| 0x11   | 1 byte | Materia attributes | See Above   |
| 0x12   | 1 byte | Materia attributes | See Above   |
| 0x13   | 1 byte | Materia attributes | See Above   |

**Equip Effects Table:**

| Byte | STR | VIT | MAG | MDEF | MAXHP | MAXMP | LUCK | DEX |
|------|-----|-----|-----|------|-------|-------|------|-----|
| 0x00 |     |     |     |      |       |       |      |     |
| 0x01 | -02 | -01 | +02 | +01  | -05%  | +05%  |      |     |
| 0x02 | -04 | -04 | +04 | +02  | -10%  | +10%  |      |     |
| 0x06 |     | +01 |     |      |       |       |      |     |
| 0x07 |     |     |     |      |       |       | +01  |     |
| 0x08 |     |     |     |      |       |       | -01  |     |
| 0x0A |     |     |     |      |       |       |      | +02 |
| 0x0B | -01 |     | +01 |      | -02%  | +02%  |      |     |
| 0x0C |     |     | +01 |      | -02%  | +02%  |      |     |
| 0x0D |     |     | +01 | +01  | -05%  | +05%  |      |     |
| 0x0E |     |     | +02 | +02  | -10%  | +10%  |      |     |
| 0x0F |     |     | +04 | +04  | -10%  | +15%  |      |     |
| 0x10 |     |     | +08 | +08  | -10%  | +20%  |      |     |

### The KERNEL2.BIN Archive

On the PC version there exists a secondary kernel archive called KERNEL2.BIN. This archive contains only sections 10-27 (Text data) of KERNEL.BIN. The data was ungzipped from the original archive, concatenated together, and then LZSed into a single archive with a 4 byte header giving the length of the file. See the section on BIN types and LZS compression in [Low Level Libraries](FF7_Kernel_Low_level_libraries.md) for more information.

---

## Common Reference Tables

### Restriction Mask Values

| Value | Description |
|-------|-------------|
| 0xFF  | Appears in Item Menu. Does not appear in Battle Menu (Not usable at all) |
| 0xFE  | Appears in Battle Menu & Item Menu (Not usable at all) |
| 0xFD  | Appears in Item Menu. Does not appear in Battle Menu (Usable in Battle Menu) |
| 0xFC  | Appears in Battle Menu & Item Menu (Usable in Battle Menu) |
| 0xFB  | Appears in Item Menu. Does not appear in Battle Menu (Usable in Item Menu) |
| 0xFA  | Appears in Battle Menu & Item Menu (Usable in Item Menu) |
| 0xF9  | Appears in Item Menu. Does not appear in Battle Menu (Usable in Item Menu & Battle Menu) |
| 0xF8  | Appears in Battle Menu & Item Menu (Usable in Item Menu & Battle Menu) |
| 0xF7  | Appears in Item Menu. Does not appear in Battle Menu (Usable in Battle Menu) |
| 0xF6  | Appears in Battle Menu & Item Menu (Usable in Battle Menu) |

### Equip Mask Values

| Value  | Description              |
|--------|--------------------------|
| 0x0001 | Equipable on Cloud       |
| 0x0002 | Equipable on Barret      |
| 0x0004 | Equipable on Tifa        |
| 0x0008 | Equipable on Aeris       |
| 0x0010 | Equipable on Red XIII    |
| 0x0020 | Equipable on Yuffie      |
| 0x0040 | Equipable on Cait Sith   |
| 0x0080 | Equipable on Vincent     |
| 0x0100 | Equipable on Cid         |
| 0x0200 | Equipable on Young Cloud |
| 0x0400 | Equipable on Sephiroth   |

### Stat Type Values

| Value | Description |
|-------|-------------|
| 0xFF  | None        |
| 0x00  | Strength    |
| 0x01  | Vitality    |
| 0x02  | Magic       |
| 0x03  | Spirit      |
| 0x04  | Dexterity   |
| 0x05  | Luck        |

### Element Values

| Value  | Description      |
|--------|------------------|
| 0x01   | Fire             |
| 0x02   | Ice              |
| 0x04   | Bolt/Lightning   |
| 0x08   | Earth            |
| 0x10   | Poison           |
| 0x20   | Gravity          |
| 0x40   | Water            |
| 0x80   | Wind             |
| 0x0001 | Holy             |
| 0xFF   | All Elements     |
| 0xFF01 | All of the above |

### Materia Slot Values

| Value | Description       |
|-------|-------------------|
| 0x00  | No Slot           |
| 0x05  | Unlinked Slot     |
| 0x06  | Left Linked Slot  |
| 0x07  | Right Linked Slot |

### Status Values

| Value  | Description  |
|--------|--------------|
| 0x01   | Death        |
| 0x02   | Near Death   |
| 0x04   | Sleep        |
| 0x08   | Poison       |
| 0x10   | Sadness      |
| 0x20   | Fury         |
| 0x40   | Confusion    |
| 0x80   | Silence      |
| 0x0010 | Haste        |
| 0x0020 | Slow         |
| 0x0040 | Stop         |
| 0x0080 | Frog         |
| 0x0001 | Small        |
| 0x0002 | Slow-numb    |
| 0x0004 | Petrify      |
| 0x0008 | Regen        |
| 0xFFFF | All statuses |

---

## NOTE: Additional Extracted Content

Due to file size constraints, the following content from `03_KERNEL.md` has been extracted but requires integration into related individual files:

- **Low-level libraries content** (667 lines, 598-1264): LZS compression algorithm details, LGP archive format, texture formats (TIM/TEX), 3D model formats (HRC/RSD/P)

**Recommendation**: This content should be merged into:
1. [FF7_Kernel_Low_level_libraries.md](FF7_Kernel_Low_level_libraries.md) - Add compression, archive, and texture sections
2. Create `FF7_3D_Model_Formats.md` or add to existing field/battle model files

See analysis report in `comparisons/FF7_Kernel_vs_03_KERNEL_analysis.md` for detailed line-by-line breakdown.
