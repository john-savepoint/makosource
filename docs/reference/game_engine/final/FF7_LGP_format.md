---
title: "FF7 LGP Archive Format"
module: "Format Spec"
created: "2025-11-29 00:00 JST"
modified: "2025-12-02 00:05 JST"
session_id: "1e09856e-a94e-4ebb-a759-f52977da5326"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Specifies the LGP archive format used by FF7 PC for bundling game assets, including header structure, TOC entries, CRC validation, and data section layout. LLMs should read this when parsing or creating LGP archives, debugging file loading issues, or implementing mod tools that manipulate FF7 data files."
llm_tags: ["lgp-archive", "pc-format", "file-structure", "archive-format", "modding-tools"]
llm_primary_topics: ["LGP file header", "Table of Contents structure", "CRC validation", "File data section", "Archive manipulation"]
llm_related_docs: ["FF7_Kernel_Low_level_libraries.md", "FF7_Field_Module.md", "FF7_LZSS_format.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: []
---

<!--
STANDARDIZATION METADATA
Original: FF7_LGP_format.md
Source: merged_with_pdf_content/FF7_LGP_format.md
Standardized: 2025-12-02 00:05 JST
Session-ID: 1e09856e-a94e-4ebb-a759-f52977da5326
Agent: FF7 Documentation Standardization Agent v1.0

Previous Merge Metadata:
MERGE METADATA
Created: 2025-11-29
Original: FF7_LGP_format.md (102 lines)
Major section: 05_FIELD_MODULE.md
Merge decision: NO EXTRACTION PERFORMED
Reason: Major section contains only brief LGP references, no format specifications
Analysis: comparisons/FF7_LGP_format_vs_05_FIELD_MODULE_analysis.md
Status: COMPLETE - Original file copied as source of truth

Standardization Changes Applied:
- Added YAML frontmatter with LLM routing metadata
- Fixed heading hierarchy: H3→H4 corrected to H2→H3 (inserted H2 "LGP Archive Specification")
- Converted 2 wiki-style links (User:Ficedula) to plain text author attribution
- Removed wiki-style TOC with anchor attributes at document start
- Preserved HTML table in Section 1 (complex styling requires HTML)
- Added language tag to implicit code examples (none present - document is prose)
- Standardized external URLs (preserved as-is, all valid)

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document provides the complete specification for FF7's LGP (Large Game Package) archive format
used on PC. LGP files bundle multiple game assets (textures, models, scripts) into single archives.
Key technical details include: 12-byte right-aligned creator header, 27-byte TOC entries per file,
3602-byte CRC section, and per-file headers with length fields. Essential for modding tools that
need to extract, modify, or create LGP archives. Cross-reference with LZSS format for compressed
content within LGP files, and Field Module for field-specific LGP usage (flevel.lgp).
-->

# FF7 LGP Archive Format

## LGP Archive Specification

### LGP Archive Format for PC (by Ficedula)

This section explains how the LGP archives from FF7 PC are constructed. If you're looking for a tool that already manages LGP archives, try Ficedula's [LGP Editor](http://sylphds.net/f2k3/index.html).

Essentially the LGP file is split up into four (maybe less, depending on how you count it) sections.

1. File header/Table of contents
2. CRC code
3. Actual data
4. File terminator

#### Section 1: File Header

This contains two parts: A header of fixed size, then the table of contents.

The first item is 12 bytes containing the file creator. This is a standard string, except it is "right-aligned". In other words the blank space comes before the actual text, not after. In FF7 it's always "SQUARESOFT" preceded by two nulls to make it 12 bytes. The only other thing you might see is the header "FICEDULA-LGP", which I use to indicate a file is an LGP *patch* one of my programs has constructed, not a complete archive.

Next is a four-byte integer saying how many files the archive contains.

Following this is the table of contents (TOC): One entry per file.

Each entry in the TOC has the following structure:

<table>
<thead>
<tr>
<th><p>Offset</p></th>
<th><p>Length</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p>20 bytes</p></td>
<td><p>Null terminated string, giving filename</p></td>
</tr>
<tr>
<td><p>4 byte integer</p></td>
<td><p>Position in this file where data starts for the file</p></td>
</tr>
<tr>
<td><p>1 byte</p></td>
<td style="background: rgb(155,155,104)"><p>Some sort of check code. File attributes? Normally seems to be<br />
14 but it does vary.</p></td>
</tr>
<tr>
<td><p>2 byte short</p></td>
<td style="background: rgb(155,155,104)"><p>Something to do with duplicate file names. If a name is unique it is 0, otherwise it is assigned a value based on existing duplicates. (Hard to explain)</p></td>
</tr>
</tbody>
</table>

#### Section 2: CRC Code

This code is used to validate the LGP archive. The bad news is I have no idea how to make it (I've figured out how to decode it, ie. find out whether the archive is valid, but I can't create my own). The good news is you don't need to! The only thing this CRC is based on is the number of files in the archive (maybe the filenames too, haven't checked that). Anyway, the TOC is the only thing this check relates to. So if you're replicating an archive from FF7 for use in the game with the same number of files and filenames you can just copy the CRC section from an existing file.

Normally it's 3602 bytes long (one archive may be different, possibly MAGIC.LGP). Anyway, one normally-safe way of calculating the CRC size is to find the end of the TOC and the beginning of the first file. Anything in between is probably CRC code (this is not guaranteed to work. It works with "official" archives but editors - such as [LGP Editor](http://www.ficedula.com/) - can alter the TOC to achieve extra things).

#### Section 3: Actual Data

The data from the files. However it's not that simple: the TOC doesn't list how long each file is (somewhat useful). It's done here. The offset in the TOC is actually the position of yet another file header. Format is:

| Size | Description |
|:--------:|-----------------------------------------|
| 20 bytes | Null terminated string, giving filename |
| 4 bytes  | File length |
| Varies   | The file data itself |

#### Section 4: Terminator

After the last piece of data comes the file descriptor. This is a simple string, except instead of being null-terminated it's terminated by the end of the file. It's "FINAL FANTASY 7" for all archives, except LGP patches, where it's "LGP PATCH FILE".

#### Notes

The game is remarkably flexible about LGP archives. So long as the TOC and the CRC data is intact it'll accept just about anything.

- Example 1: The filename in the TOC and in the actual file header don't have to match. It only checks the TOC.
- Example 2: You can point two entries in the TOC at the same data and it works.
- Example 3: You can have ANY junk in the data section so long as all the TOC entries point to a valid file header. Not every piece of data has to be "accounted" for by the TOC. There can be data not used.

[LGP Editor](http://www.ficedula.com/) uses this to its advantage in the Advanced Editor. If you want to replace a file in an LGP archive with your own copy, it just puts the file on the end of the LGP, writes a new file terminator, and updates the TOC to point at the new file. It even lets you link two TOC entries to the same data or have "inactive" files in the archive that aren't referenced by any TOC entry.

I don't know whether the file terminator has to be intact, but for safety's sake my editor preserves it. The CRC must be present and correct. Also, if you're replacing an archive with you're own custom version make sure it has filenames in the TOC matching the ones in the old one.

The game doesn't check archive sizes as long as all filenames are present. So if you want, you could replace an archive containing 95 files with a 98-file archive, so long as 95 of those 98 names matched those present in the original 95-file archive. (However there's no point in doing this when the game won't use any files other than the 95 it's expecting to find).

There are reports on [Qhimm's board](http://forums.qhimm.com/) that once you've altered an archive and the game refuses to read it, it won't ever read it until you reinstall - even if you fix the problem/restore from a backup. The idea was generally scorned and ignored, but I'll mention it because something like that happened to me. No solid conclusion can be drawn here.

Sometimes, there are data "gaps" in the file that don't appear to be referenced by any file - even by an inactive file. If you're only using the TOC method to get at files (the easy way) then you won't notice this anyway. However, if you're stepping through the file header by header, even reading the unused ones, this can cause problems. If you use my program to update a file with one that's smaller than the original (can happen) then it writes it in, but leaves a gap after it (of course). However, to help you out, after the end of the file, it writes a 4 byte integer saying how much more space to skip over to reach the next file header. This really doesn't affect many things - only tools (like my Advanced LGP Editor) that bypass the TOC to construct their own file lists. FF7 never notices a thing.

### Useful Downloads

Below there are links to known programs that are capable to edit LGP archives:

- [LGP Tools](http://www.sylphds.net/f2k3/programs/lgptools/lgptools160.zip) - with an Advanced LGP Editor allowing edit archive thoroughly
- [Emerald](http://elentor.com/Projetos/FF7-Tools/Extracting/Emerald.zip) - has mass extracting/repacking function
- [Unmass](http://mirex.mypage.sk/index.php?selected=1#Unmass) - general file extractor with LGP archives support
