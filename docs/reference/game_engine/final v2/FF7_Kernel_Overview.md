---
title: "FF7/Kernel/Overview"
module: "Kernel"
created: "2025-11-28 15:50 JST"
modified: "2025-12-02 01:32 JST"
session_id: "c15699b1-bd8f-462f-834b-b9d6dec342de"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Documents the FF7 Kernel module architecture including its NES heritage, threaded multitasking design, and role as central system manager. LLMs should read this when understanding FF7's modular architecture, memory management relationships, or how game modules (Field, Battle, Menu) coordinate."
llm_tags: ["kernel", "architecture", "memory-management", "multitasking", "psy-q", "module-system"]
llm_primary_topics: ["Kernel history from NES MMC1", "Threaded multitasking system", "Module banking and coordination", "Psy-Q library integration"]
llm_related_docs: ["FF7_Kernel_Memory_management.md", "FF7_Kernel_Kernelbin.md", "FF7_Kernel_Low_level_libraries.md", "FF7_Engine_basics.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: ["FF7_Engine_basics.md", "FF7_Kernel.md", "FF7_Kernel_Kernelbin.md", "FF7_Kernel_Memory_management.md"]
---

<!--
STANDARDIZATION METADATA
Original: FF7_Kernel_Overview.md
Source: merged_with_pdf_content/FF7_Kernel_Overview.md
Standardized: 2025-12-02 01:32 JST
Session-ID: c15699b1-bd8f-462f-834b-b9d6dec342de
Agent: FF7 Documentation Cleanup Agent v2.0

Previous Standardization:
- 2025-12-01 21:20 JST - Initial standardization (Session: 887a1b3f-e34c-44f4-8434-e7e55610b603)
- 2025-11-28 15:50 JST - Content merge from extracted sections

Previous Merge Metadata:
Source Files:
  - Original: markdown/FF7_Kernel_Overview.md
  - Major Section: extracted_major_sections/03_KERNEL.md (lines 1-26)
Status: Content review complete. Individual file contains all overview material.
        No additional content extracted from major section (all content already present).

Related Files:
  - FF7_Kernel_Memory_management.md (major section lines 27-78)
  - FF7_Kernel_Kernelbin.md (major section lines 79-548)
  - FF7_Kernel_Low_level_libraries.md (major section lines 549-799+)
  - FF7_Playstation_Battle_Model_Format.md (major section lines 800-1600+)

Cleanup Changes Applied (v2.0):
- Updated modified timestamp and session ID
- Added GitHub-flavored markdown alerts for important notes
- Enhanced Related Content section with visual hierarchy
- No encoding issues found (document was clean)
- No LaTeX rendering issues found

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document provides the architectural overview of FF7's Kernel module - the central
multitasking system that manages all game modules (Field, Battle, Menu, World Map).
It traces the Kernel concept from its NES origins through the PSX and PC ports, explaining
how module banking evolved from hardware memory mappers to CD-ROM loading. Key technical
concepts include the threaded task manager, RAM/VRAM coordination, and Psy-Q library
integration. For implementation details, see the related documents covering Memory Management,
KERNEL.BIN formats, and Low-level Libraries.
-->

# FF7/Kernel/Overview

## History

The kernel is a throwback to the very first Final Fantasy game for the Nintendo's original 8 bit system. The NES could only natively read 32 kilobytes of program ROM. To get around this incredible limitation, Nintendo developed "memory mappers" that allowed parts of the program to be switched out, or "banked" and replaced with other parts stored on the game cartridge.

FF1 used Nintendo's "Memory Manager Controller #1" (MMC1). This controller split the game into sixteen sections, each 16 kilobytes long. (The maximum an MMC1 program could be was 256K). This controller also split the accessible memory from the cartridge into two 16K sections. The top 16K was bankable. The bottom 16K could never be switched out and stayed in memory until you removed the cartridge.

> [!NOTE]
> The original FF1 kernel was located in this bottom 16K of memory - the non-bankable region that persisted throughout the entire game session.

First and foremost the kernel contained the main program loop. It handled all the low level functions for the game. Some of these included controlling interrupts, banking in and out the appropriate part of the game, jumping control to a particular module, playing the music, and other tasks.

As the Final Fantasy franchise grew, so did the size of the games. They all still retained the kernel/module system. During the backporting process, this did cause a few headaches. For example, Final Fantasy 6 was originally developed for the Super Nintendo. When its menu module was banked in, it was done with electronic bank switching. The later PSX port banked the data from the CD-ROM, which caused an unexpected lag that one wasn't used to. On the PC version for FF7, the menu system was simply integrated into the main executable.

## Kernel Functionality

The Kernel is a threaded multitasking program that manages the whole system. It uses a simple software based memory manager that handles both RAM and video memory for all the modules in the game. Assisting the kernel are many statically linked Psy-Q libraries. In the case of the PC port, the Psy-Q libs were replaced with a PC equivalent. For example the SEQ player was replaced with a MIDI player. Both accomplish the same tasks, just with different formats and execution strategies.

> [!IMPORTANT]
> The table below is a generic representation of how the kernel sits in relation to the other aspects of the program - showing the module relationships and memory management layers.

![Kernel architecture diagram showing module relationships and memory management layers](../images/Kernel_table.png)

---

## Related Content

The following sections exist in related documentation files covering detailed Kernel subsystems:

### Memory Management

| Document | Topics Covered |
|:---------|:---------------|
| [FF7_Kernel_Memory_management.md](FF7_Kernel_Memory_management.md) | RAM management, VRAM management, CD-ROM management |

**Content includes:**

- RAM management (Save Map structure, field script banks)
- VRAM management (PSX layout, texture caching)
- CD-ROM management (module preloading, sector-based access)

### Game Resources - KERNEL.BIN/KERNEL2.BIN

| Document | Topics Covered |
|:---------|:---------------|
| [FF7_Kernel_Kernelbin.md](FF7_Kernel_Kernelbin.md) | Archive structure, data formats, PC variants |

**Content includes:**

- 27-section archive breakdown
- Detailed format specifications for commands, attacks, items, weapons, armor, accessories, materia data
- KERNEL2.BIN PC archive format

### Low-Level Libraries

| Document | Topics Covered |
|:---------|:---------------|
| [FF7_Kernel_Low_level_libraries.md](FF7_Kernel_Low_level_libraries.md) | Compression, archives, texture formats |

**Content includes:**

- PC to PSX format comparison
- BIN archive types (uncompressed and GZIP)
- LZS compression algorithm with detailed examples
- LGP archive format documentation
- TIM texture format specifications

### 3D Model Formats

| Document | Topics Covered |
|:---------|:---------------|
| [FF7_Playstation_Battle_Model_Format.md](FF7_Playstation_Battle_Model_Format.md) | PSX model structure, vertex data, grouping |

**Content includes:**

- PSX 3D model format structure (chunks, vertices, normals, polygons, edges, groups)
- Model grouping architecture and vertex cloning
- Complex vertex/polygon/edge indexing systems
- Bounding boxes and normal index tables
