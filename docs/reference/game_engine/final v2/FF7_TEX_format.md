---
title: "FF7 TEX Texture Format (PC)"
module: "Format Spec"
created: "2025-11-29 00:00 JST"
modified: "2025-12-02 08:40 JST"
session_id: "dac72da6-9cb4-47ef-836a-2e895a8b754c"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Specifies the PC-exclusive TEX texture format header structure, palette data, pixel formats, and color keying mechanisms. LLMs should read this when parsing or generating PC texture files, debugging texture loading issues, or converting between PSX TIM and PC TEX formats."
llm_tags: ["pc-texture", "tex-format", "palette", "color-keying", "pixel-format", "d3d"]
llm_primary_topics: ["TEX file header structure", "Palette data format", "Pixel format specification", "Color key transparency", "BGRA color storage"]
llm_related_docs: ["PSX_TIM_format.md", "FF7_Kernel_Low_level_libraries.md", "FF7_Field_Module.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: []
---

<!--
STANDARDIZATION METADATA
Original: FF7_TEX_format.md
Source: merged_with_pdf_content/FF7_TEX_format.md
Standardized: 2025-12-02 08:40 JST
Session-ID: dac72da6-9cb4-47ef-836a-2e895a8b754c
Agent: FF7 Documentation Cleanup Agent v2.0

Previous Merge Metadata:
MERGE METADATA
Created: 2025-11-29
Original: FF7_TEX_format.md (364 lines)
Major section: None (PC texture format not in major sections)
Merge decision: NO EXTRACTION PERFORMED
Reason: TEX format is PC-specific, separate from PSX field module documentation
Analysis: comparisons/FF7_TEX_format_vs_05_FIELD_MODULE_analysis.md
Status: COMPLETE - Original file copied as source of truth

V2 Cleanup Changes Applied:
- Updated session ID and timestamps
- Converted HTML table to GitHub-flavored Markdown table for better rendering
- Added section divider rows for logical grouping
- Added GitHub alerts for important behavioral notes
- Improved code formatting for hex values and technical terms
- Enhanced cross-reference section formatting

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document provides the complete binary specification for FF7's PC-exclusive TEX texture
format. The TEX format is more flexible than PSX TIM, supporting variable bit depths, custom
pixel formats, and sophisticated color keying. Key concepts include the 236-byte header with
D3D driver hints, BGRA palette storage, and per-palette transparency control. Related to
PSX_TIM_format.md (PSX equivalent) and FF7_Kernel_Low_level_libraries.md (archive context).
-->

# FF7 TEX Texture Format (PC)

## Format Overview

FF7 PC texture files use the TEX format, consisting of a header, an optional palette, and bitmap data. Data is typically stored as palettized pictures, with bitmap pixels referencing palette entries. Color index `0` (usually black in the palette) is commonly used as the transparent color.

### Transparency Behavior

> [!IMPORTANT]
> Pixel values of `0` may or may not be transparent, depending on the color key status (detailed below). This also applies to non-paletted formats.

### 16-bit Color Mode

When bit depth is 16, data is stored as packed RGB in **RGB555** format (5 bits per color channel in one 2-byte entry). This mode is rarely used in FF7 but is common in FF8.

### Format Flexibility

The TEX format is highly flexible and can accommodate almost any non-paletted format as long as it is properly described in the header.

## Header Structure

The TEX header is **236 bytes** (`0xEC`) and contains all metadata needed to interpret the texture data.

| Offset | Size | Description |
|:------:|:-----|:------------|
| | | **Header** |
| `0x00` | 4 bytes (long) | Version, must be `1`, or FF7 won't load the file |
| `0x04` | 4 bytes (long) | Unknown |
| `0x08` | 4 bytes (long) | Color key flag |
| `0x0C` | 4 bytes (long) | Unknown |
| `0x10` | 4 bytes (long) | Unknown |
| `0x14` | 4 bytes (long) | Minimum bits per color (D3D driver uses these to determine which texture format to convert to on load) |
| `0x18` | 4 bytes (long) | Maximum bits per color |
| `0x1C` | 4 bytes (long) | Minimum alpha bits |
| `0x20` | 4 bytes (long) | Maximum alpha bits |
| `0x24` | 4 bytes (long) | Minimum bits per pixel |
| `0x28` | 4 bytes (long) | Maximum bits per pixel |
| `0x2C` | 4 bytes (long) | Unknown |
| `0x30` | 4 bytes (long) | Number of palettes |
| `0x34` | 4 bytes (long) | Number of colors per palette |
| `0x38` | 4 bytes (long) | Bit depth |
| `0x3C` | 4 bytes (long) | Image Width |
| `0x40` | 4 bytes (long) | Image Height |
| `0x44` | 4 bytes (long) | Pitch or bytes per row, usually ignored and assumed to be bytes per pixel × width |
| `0x48` | 4 bytes (long) | Unknown |
| `0x4C` | 4 bytes (long) | Palette flag (this indicates the presence of a palette) |
| `0x50` | 4 bytes (long) | Bits per index, always `0` for non-paletted images |
| `0x54` | 4 bytes (long) | Indexed-to-8bit flag, never used in FF7 |
| `0x58` | 4 bytes (long) | Palette size, always number of palettes × colors per palette |
| `0x5C` | 4 bytes (long) | Number of colors per palette (again, may be `0` sometimes, the other value will be used anyway) |
| `0x60` | 4 bytes (long) | Runtime data, ignored on load |
| `0x64` | 4 bytes (long) | Bits per pixel |
| `0x68` | 4 bytes (long) | Bytes per pixel, always use this to determine how much data to read—if this is `1` you read 1 byte per pixel, regardless of bit depth |
| | | **Pixel Format** (all `0` for paletted images) |
| `0x6C` | 4 bytes (long) | Number of red bits |
| `0x70` | 4 bytes (long) | Number of green bits |
| `0x74` | 4 bytes (long) | Number of blue bits |
| `0x78` | 4 bytes (long) | Number of alpha bits |
| `0x7C` | 4 bytes (long) | Red bitmask |
| `0x80` | 4 bytes (long) | Green bitmask |
| `0x84` | 4 bytes (long) | Blue bitmask |
| `0x88` | 4 bytes (long) | Alpha bitmask |
| `0x8C` | 4 bytes (long) | Red shift |
| `0x90` | 4 bytes (long) | Green shift |
| `0x94` | 4 bytes (long) | Blue shift |
| `0x98` | 4 bytes (long) | Alpha shift |
| `0x9C` | 4 bytes (long) | Always 8 − Number of red bits (purpose unclear, always ignored) |
| `0xA0` | 4 bytes (long) | 8 − Number of green bits |
| `0xA4` | 4 bytes (long) | 8 − Number of blue bits |
| `0xA8` | 4 bytes (long) | 8 − Number of alpha bits |
| `0xAC` | 4 bytes (long) | Red max |
| `0xB0` | 4 bytes (long) | Green max |
| `0xB4` | 4 bytes (long) | Blue max |
| `0xB8` | 4 bytes (long) | Alpha max |
| | | **End of Pixel Format** |
| `0xBC` | 4 bytes (long) | Color key array flag (this indicates the presence of a color key array) |
| `0xC0` | 4 bytes (long) | Runtime data |
| `0xC4` | 4 bytes (long) | Reference alpha (more on this later) |
| `0xC8` | 4 bytes (long) | Runtime data |
| `0xCC` | 4 bytes (long) | Unknown |
| `0xD0` | 4 bytes (long) | Palette index (runtime data) |
| `0xD4` | 4 bytes (long) | Runtime data |
| `0xD8` | 4 bytes (long) | Runtime data |
| `0xDC` | 4 bytes (long) | Unknown |
| `0xE0` | 4 bytes (long) | Unknown |
| `0xE4` | 4 bytes (long) | Unknown |
| `0xE8` | 4 bytes (long) | Unknown |
| | | **Palette Data** (ignore this section if palette flag is `0`) |
| `0xEC` | Palette size × 4 | The raw palette data, always in 32-bit BGRA format |
| | | **Pixel Data** |
| Varies | width × height × bytes per pixel | Read `width × height × "bytes per pixel"` bytes of data. If there's a palette, every pixel is an index into that palette, otherwise use the pixel format specification. |
| | | **Color Key Array** |
| Varies | Number of palettes × 1 bytes | Per-palette color key flags |

## Color Keying

If the color key flag is zero, no color keying is performed and the color key array is ignored. Otherwise, the current palette index is used to retrieve a single byte from the color key array; this becomes the new color key flag, where zero means "don't do color keying."

> [!NOTE]
> If there is no color key array (and the color key flag is not zero), you should always apply color keying.

## Reference Alpha

Reference alpha only applies to paletted images.

> [!IMPORTANT]
> If the alpha value sampled from the palette is `0xFE`, this value should be replaced with the reference alpha value from the header.

## Related Formats

- **[PSX TIM Format](PSX_TIM_format.md)** — PlayStation equivalent texture format
- **[Low-Level Libraries](FF7_Kernel_Low_level_libraries.md#tex-texture-data-format-for-the-pc)** — Archive context for TEX files

## Attribution

Original documentation by Mirex with edits by Aali.
