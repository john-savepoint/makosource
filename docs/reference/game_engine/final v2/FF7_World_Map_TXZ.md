---
title: "FF7 World Map TXZ Archive Format"
module: "World Map"
created: "2025-11-29 10:50 JST"
modified: "2025-12-02 08:40 JST"
session_id: "ad02a715-6bf0-43a4-8634-34d20409dc1a"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Documents TXZ archive format for PSX world map textures, including LZS compression, VRAM upload blocks, and PSX GPU-compatible palette structures. LLMs should consult this when parsing world map texture archives, implementing texture loading, or debugging VRAM coordinate issues."
llm_tags: ["psx", "txz-archive", "world-map", "vram", "texture", "lzs-compression"]
llm_primary_topics: ["TXZ archive structure", "VRAM block format", "PSX texture palettes", "LZS compression header", "World map texture data"]
llm_related_docs: ["FF7_WorldMap_Module.md", "FF7_World_Map_BSZ.md", "FF7_WorldMap_Module_Script.md", "FF7_LZSS_format.md", "PSX_TIM_format.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: ["FF7_WorldMap_Module.md", "FF7_WorldMap_Module_Script.md", "FF7_World_Map_BSZ.md", "FF7_World_Map_Encounters.md"]
---

<!--
STANDARDIZATION METADATA
Original: FF7_World_Map_TXZ.md
Source: merged_with_pdf_content/FF7_World_Map_TXZ.md
Standardized: 2025-12-02 08:40 JST
Session-ID: ad02a715-6bf0-43a4-8634-34d20409dc1a
Agent: FF7 Documentation Cleanup Agent v2.0

Previous Merge Metadata:
MERGE METADATA
Created: 2025-11-29 10:50 JST
Original file: FF7_World_Map_TXZ.md (76 lines)
Major section analyzed: 07_WORLD_MAP.md (86 lines)
Merge status: NO ADDITIONS REQUIRED
Reasoning: Individual file covers TXZ archive format (PSX). Major section contains PC encounter data, which belongs in FF7_WorldMap_Module.md. No scope overlap.
Images adjusted: 0 (none found)
Analysis report: comparisons/FF7_World_Map_TXZ_vs_07_WORLD_MAP_analysis.md
Session notes: Encounter data (lines 7-72 of major section) should be extracted to worldmap module documentation separately.

Cleanup Changes Applied (v2):
- Changed table alignment from center to left-align for description column (improved readability)
- Converted "Important" note to GitHub-flavored alert syntax
- Updated timestamps and session ID

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document specifies the TXZ archive format used for PlayStation world map textures in FF7.
It covers LZS compression headers, section parsing, and VRAM upload block structures including
PSX GPU-compatible texture/palette identifiers. Related to world map mesh textures described
in FF7_WorldMap_Module.md and texture coordinate mapping in the TextureTable reference.
-->

# FF7 World Map TXZ Archive Format

## Overview

The TXZ file format contains compressed texture data for FF7's world map system on PlayStation. This document focuses on WM0.TXZ (the main overworld map), though the format applies equally to WM2.TXZ (underwater map) and WM3.TXZ (snowfield map).

## WM0.TXZ Structure

The following information applies specifically to WM0.TXZ. It is reasonable to assume that the rest of the TXZ files use a similar format, where WM2.TXZ and WM3.TXZ presumably hold equivalent data for the underwater and snowfield maps respectively.

### Compression

TXZ files are compressed using standard LZS compression where the first 4 bytes contain the size of the compressed data. For details on LZS decompression, see [LZSS Format](FF7_LZSS_format.md).

### Archive Format

Uncompressed TXZ files are divided into several different sections. To extract the different sections, a header must be parsed at the beginning of the file:

1. The first 4 bytes contain the number of sections
2. Following that are 4 × `<number of sections>` bytes containing offsets into the file for each section
3. A section can be assumed to end where the next section begins
4. The last section runs until the end of the file

> [!IMPORTANT]
> Offsets do not include the first 4 bytes of the file! Add 4 to get the actual file offset for each section.

## Section Definitions

### Section 0

Unknown format, might be a model. Looks like there's at least one or two textures in there.

### Section 1

Texture data for direct VRAM upload, same format as section 2 but contains only a single block.

### Section 2: World Map Mesh Textures

Texture data for the world map mesh (see [MAP Format](FF7_WorldMap_Module.md#map-format)). This section starts with a table of 512 palette/texture identifiers in a format compatible with the PSX GPU. See <http://psx.rules.org/gpu.txt> for more information.

The following structure can be used to read this data:

```c
struct wm_texture
{
   unsigned int clutx:6;
   unsigned int cluty:10;
   unsigned int tx:4;
   unsigned int ty:1;
   unsigned int abr:2;
   unsigned int tp:2;
   unsigned int reserved:7;
};
```

Texture IDs are the same for the PSX and PC version, which means that this table maps 1:1 to the table of PC textures. For the complete mapping, see [WorldMap Module Texture Table](FF7_WorldMap_Module.md#texture).

#### VRAM Block Structure

After the texture table follows a number of blocks intended for direct VRAM upload. Each block has the following structure:

| Size | Description |
|:-----|:------------|
| 4 bytes | Size of this block (including header) |
| 2 bytes | Destination X coordinate |
| 2 bytes | Destination Y coordinate |
| 2 bytes | Width |
| 2 bytes | Height |
| Width × Height × 2 bytes | Pixel data |

A new block can be assumed to start where the previous one ends until the end of this section is reached.

### Section 3

Unknown format, contains more blocks of VRAM data.

### Section 4: Script Data

Contains the script for the overworld map. This appears to be a copy of the data in wm0.ev. For script format details, see [WorldMap Module Script](FF7_WorldMap_Module_Script.md).

### Sections 5-11: Audio

These sections contain songs in standard AKAO format. Presumably the different overworld background themes are stored here.

## Cross-References

- [WorldMap Module](FF7_WorldMap_Module.md) - MAP format and mesh structure
- [WorldMap Script](FF7_WorldMap_Module_Script.md) - Script engine and .ev format
- [World Map BSZ](FF7_World_Map_BSZ.md) - Related world map data
- [LZSS Format](FF7_LZSS_format.md) - Compression algorithm details
- [PSX TIM Format](PSX_TIM_format.md) - PSX texture format reference
