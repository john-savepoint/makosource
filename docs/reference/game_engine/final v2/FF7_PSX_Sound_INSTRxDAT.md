---
title: "FF7/PSX/Sound/INSTRx.DAT"
module: "Sound"
created: "2025-11-29 00:00 JST"
modified: "2025-12-02 08:35 JST"
session_id: "9bd6db9f-9dcb-4235-a06b-06dd9e10fbd1"
author: "Generated by Claude Code Documentation Standardization Agent"
status: "Complete"

# LLM-specific metadata (CRITICAL for routing)
llm_summary: "Documents the INSTRx.DAT instrument index format containing ADSR envelope parameters and SPU memory offsets for FF7 PSX sound samples. LLMs should read this when implementing instrument loading, analyzing ADSR envelope behavior, or debugging sound playback issues."
llm_tags: ["psx", "sound", "adsr-envelope", "instrument-index", "spu-memory", "audio-metadata"]
llm_primary_topics: ["InstrumentIndex struct format", "ADSR envelope parameters", "SPU memory offset translation", "Pitch predefinition tables"]
llm_related_docs: ["FF7_PSX_Sound_INSTRxALL.md", "FF7_PSX_Sound_AKAO_frames.md", "FF7_PSX_Sound_Overview.md"]

# Backlinks (leave empty - populated in pass 2)
referenced_by: ["FF7_PSX_Sound.md", "FF7_PSX_Sound_AKAO_frames.md", "FF7_PSX_Sound_INSTRxALL.md", "FF7_PSX_Sound_Overview.md"]
---

<!--
STANDARDIZATION METADATA
Original: FF7_PSX_Sound_INSTRxDAT.md
Source: merged_with_pdf_content/FF7_PSX_Sound_INSTRxDAT.md
Standardized: 2025-12-02 08:35 JST
Session-ID: 9bd6db9f-9dcb-4235-a06b-06dd9e10fbd1
Agent: FF7 Documentation Cleanup Agent v2.0

Previous Merge Metadata:
MERGE METADATA
Created: 2025-11-29
Original: FF7_PSX_Sound_INSTRxDAT.md (46 lines)
Major section: None (Sound formats not in major sections)
Merge decision: NO EXTRACTION PERFORMED
Reason: INSTR.DAT format documentation is complete and self-contained
Status: COMPLETE - Original file copied as source of truth

v2.0 Cleanup Changes Applied:
- Updated modified timestamp and session_id
- Enhanced notes with GitHub-flavored markdown alerts
- Improved table alignment for better readability
- No encoding issues found (document was clean)

LLM CONTEXT BLOCK (Read this first for routing decisions):
This document specifies the binary format of INSTR.DAT and INSTR2.DAT files found on FF7 PSX
game discs. These are instrument index/metadata files that complement the INSTRx.ALL sample
data files. Each record contains ADSR envelope parameters (standard synthesizer envelope) and
SPU memory offsets pointing to attack/loop portions of instrument samples. The offsets are NOT
file offsets - they point to SPU internal memory where samples are DMA-loaded. To convert to
file offsets, subtract 0x0ff0. The index table resides at PSX RAM address 0x80075f30 during gameplay.
-->

# FF7/PSX/Sound/INSTRx.DAT

## Overview

There are two files of this type on FF7 game discs:

| File       | Location           | Contents                                                     |
|:-----------|:-------------------|:-------------------------------------------------------------|
| INSTR.DAT  | SOUND/INSTR.DAT    | Main game sounds (93 instruments)                            |
| INSTR2.DAT | SOUND/INSTR2.DAT   | Voices from ending theme "One Winged Angel" (4 instruments)  |

These files contain index data for all instruments from the corresponding [INSTRx.ALL](FF7_PSX_Sound_INSTRxALL.md) sample data files.

## Record Format

Each instrument record uses the following structure:

```c
struct InstrumentIndex {
    /* Sample data offsets (SPU memory addresses, not file offsets) */
    uint32_t attack_offset;   // offset to attack part of instrument
    uint32_t loop_offset;     // offset to loop part of instrument

    /* ADSR Envelope settings */
    uint8_t attack_rate;      // ADSR: attack rate (0x00-0x7f)
    uint8_t decay_rate;       // ADSR: decay rate (0x00-0x0f)
    uint8_t sustain_level;    // ADSR: sustain level (0x00-0x0f)
    uint8_t sustain_rate;     // ADSR: sustain rate (0x00-0x7f)
    uint8_t release_rate;     // ADSR: release rate (0x00-0x1f)

    uint8_t attack_mode;      // ADSR: attack mode
                              //    0x05 - exponential
                              //   other - linear

    uint8_t sustain_mode;     // ADSR: sustain mode
                              //    0x01 - linear, increase
                              //    0x05 - exponential, increase
                              //    0x07 - exponential, decrease
                              //   other - linear, decrease

    uint8_t release_mode;     // ADSR: release mode
                              //    0x07 - exponential decrease
                              //   other - linear decrease

    uint32_t pitch[12];       // predefined pitch set for instrument
};
```

## Memory Layout Notes

### File Structure

Each index file occupies exactly 4 CD-ROM sectors. Unused space at the end is zero-padded.

### SPU Memory Offset Translation

> [!IMPORTANT]
> The `attack_offset` and `loop_offset` fields are **not** file offsets. They are offsets into SPU internal memory where all instrument sample data from INSTRx.ALL files is loaded via DMA in one chunk.

To translate to INSTR.ALL file offsets:

```c
file_offset = spu_offset - 0x0ff0;
```

> [!WARNING]
> The offset for INSTR2.DAT has not been fully investigated yet. The `0x0ff0` subtraction may differ.

### Runtime Location

The INSTR.DAT table resides in PSX RAM at address `0x80075f30` during gameplay. This table is referenced when:

- Loading any instrument
- Resetting pitch for an instrument

## Related Documentation

- [INSTRx.ALL Format](FF7_PSX_Sound_INSTRxALL.md) - Sample data referenced by these index files
- [AKAO Frames](FF7_PSX_Sound_AKAO_frames.md) - Sound sequence format that uses instruments
- [PSX Sound Overview](FF7_PSX_Sound_Overview.md) - General PSX sound system architecture
